{"version":3,"file":"CheckBox.js","sources":["../src/CheckBox.ts"],"sourcesContent":["import { Container } from '@pixi/display';\nimport { TextStyle, ITextStyle, Text } from '@pixi/text';\nimport { Signal } from 'typed-signals';\nimport { Switcher } from './Switcher';\nimport { cleanup } from './utils/helpers/cleanup';\n\ntype LabelStyle = TextStyle | Partial<ITextStyle>;\n\ntype CheckBoxStyle = {\n    checked: Container | string;\n    unchecked: Container | string;\n    text?: LabelStyle;\n    textOffset?: {\n        x?: number;\n        y?: number;\n    };\n};\n\nexport type CheckBoxOptions = {\n    style: CheckBoxStyle;\n    text?: string;\n    checked?: boolean;\n};\n\n/**\n * Creates a container-based checkbox element.\n * @example\n *  new CheckBox({\n *     style: {\n *         unchecked: `switch_off.png`,\n *         checked: `switch_on.png`,\n *     }\n *  });\n */\nexport class CheckBox extends Switcher\n{\n    //* Text label */\n    label!: Text;\n\n    /** Signal emitted when checkbox state changes. */\n    onCheck: Signal<(state: boolean) => void>;\n\n    protected _style: CheckBoxStyle;\n\n    constructor(options: CheckBoxOptions)\n    {\n        super();\n\n        this.text = options.text;\n\n        this.style = options.style;\n\n        this.checked = options.checked;\n\n        this.triggerEvents = ['onPress'];\n\n        this.innerView.cursor = 'pointer';\n\n        this.onCheck = new Signal();\n\n        this.onChange.connect(() => this.onCheck.emit(this.checked));\n    }\n\n    protected addLabel(text?: string, style?: LabelStyle)\n    {\n        if (!text) return;\n\n        this.label = new Text(text ?? '', style ?? this._style?.text);\n        this.addChild(this.label);\n\n        this.label.cursor = 'pointer';\n        this.label.eventMode = 'static';\n        this.label.on('pointertap', () => (this.checked = !this.checked));\n    }\n\n    /** Setter, which sets a checkbox text. */\n    set text(text: string)\n    {\n        if (!text)\n        {\n            cleanup(this.label);\n\n            return;\n        }\n\n        this.label ? (this.label.text = text) : this.addLabel(text);\n    }\n\n    /** Getter, which returns a checkbox text. */\n    get text(): string | ''\n    {\n        return this.label?.text ?? '';\n    }\n\n    /** Setter, which sets a checkbox style settings. */\n    set style(style: CheckBoxStyle)\n    {\n        this._style = style;\n\n        const { unchecked, checked } = style;\n\n        this.views = [unchecked, checked];\n\n        const uncheckedView = this.views[0];\n\n        if (this.label)\n        {\n            if (style.text) this.label.style = style.text;\n\n            this.label.x = uncheckedView.width + 10 + (style.textOffset?.x ?? 0);\n            this.label.y = ((uncheckedView.height - this.label.height) / 2) + (style.textOffset?.y ?? 0);\n        }\n    }\n\n    /** Getter, which returns a checkbox style settings. */\n    get style(): CheckBoxStyle\n    {\n        return this._style;\n    }\n\n    /** Getter, which returns a checkbox state. */\n    get checked(): boolean\n    {\n        return this.active === 1;\n    }\n\n    /** Setter, which sets a checkbox state. */\n    set checked(checked: boolean)\n    {\n        this.switch(checked ? 1 : 0);\n    }\n\n    /**\n     * Setter, that sets a checkbox state without emitting a signal.\n     * @param checked\n     */\n    forceCheck(checked: boolean)\n    {\n        this.forceSwitch(checked ? 1 : 0);\n    }\n}\n"],"names":["Switcher","Signal","text","Text","cleanup"],"mappings":"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"}